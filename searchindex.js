Search.setIndex({"docnames": ["index", "src/api/bms", "src/api/data_objects", "src/api/misc", "src/dev/building_flashing", "src/dev/customization", "src/dev/unit_tests", "src/dev/workspace_setup", "src/features", "src/supported_hardware"], "filenames": ["index.rst", "src/api/bms.rst", "src/api/data_objects.rst", "src/api/misc.rst", "src/dev/building_flashing.rst", "src/dev/customization.rst", "src/dev/unit_tests.rst", "src/dev/workspace_setup.rst", "src/features.rst", "src/supported_hardware.rst"], "titles": ["Libre Solar BMS Firmware Documentation", "BMS", "Data Objects", "Misc", "Building and Flashing", "Customization", "Unit Tests", "Workspace Setup", "Features", "Supported Hardware"], "terms": {"thi": [0, 5, 7, 9], "describ": [0, 5], "base": [0, 1, 5, 8], "zephyr": [0, 4, 5, 6, 7, 8], "rto": 0, "differ": [0, 8, 9], "batteri": [0, 1], "manag": [0, 1], "system": [0, 1, 5], "The": [0, 1, 3, 4, 5, 6, 9], "i": [0, 1, 3, 4, 5, 6, 9], "under": [0, 8], "ongo": 0, "develop": [0, 5, 6], "most": [0, 1, 4, 7], "recent": [0, 1, 4], "version": [0, 4], "can": [0, 1, 4, 5, 7, 8], "found": 0, "github": [0, 4, 7], "licens": 0, "creativ": 0, "common": [0, 2], "attribut": 0, "sharealik": 0, "4": [0, 1, 9], "0": [0, 1, 5, 9], "intern": 0, "cc": 0, "BY": 0, "sa": 0, "full": [0, 1, 5, 9], "text": 0, "avail": [0, 4, 8, 9], "http": [0, 7, 8], "creativecommon": 0, "org": 0, "defin": [1, 2, 5], "ocv_point": 1, "high": 1, "level": 1, "api": 1, "enum": [1, 2], "bms_state": 1, "possibl": [1, 5, 8], "state": 1, "valu": [1, 2, 3], "enumer": 1, "bms_state_off": 1, "off": [1, 3], "charg": [1, 8], "discharg": [1, 8], "disabl": [1, 5], "bms_state_chg": 1, "bms_state_di": 1, "bms_state_norm": 1, "normal": 1, "oper": 1, "mode": 1, "both": 1, "enabl": [1, 5, 8], "bms_state_shutdown": 1, "start": [1, 8], "shutdown": [1, 2], "sequenc": 1, "bms_cell_typ": 1, "cell": [1, 8, 9], "type": [1, 2, 8], "cell_type_custom": 1, "custom": [1, 8], "set": [1, 5, 7], "cell_type_lfp": 1, "lifepo4": [1, 5, 8], "li": 1, "ion": 1, "3": [1, 3, 9], "v": [1, 8], "nomin": [1, 5, 8], "cell_type_nmc": 1, "nmc": [1, 2, 8], "graphit": 1, "7": 1, "cell_type_lto": 1, "titan": 1, "2": [1, 5, 9], "function": [1, 2, 3, 6], "void": [1, 2, 3], "bms_init_config": 1, "struct": 1, "bms_context": 1, "float": [1, 3], "capacity_ah": 1, "initi": [1, 3, 4, 7], "bms_ic_conf": 1, "typic": 1, "default": [1, 4, 5], "given": 1, "paramet": [1, 2, 3], "pointer": [1, 3], "object": 1, "One": 1, "celltyp": 1, "int": 1, "so": [1, 4, 5], "via": [1, 2, 5, 8], "kconfig": [1, 5], "nominal_capac": 1, "capac": [1, 8], "pack": [1, 8], "bms_state_machin": 1, "main": [1, 4, 5, 7], "machin": 1, "bms_soc_upd": 1, "updat": [1, 4, 7], "soc": [1, 8], "current": [1, 8, 9], "measur": 1, "should": [1, 4, 6], "call": [1, 2, 5], "each": [1, 7], "time": [1, 7], "after": 1, "new": [1, 5, 6, 7], "wa": [1, 3], "obtain": 1, "bms_soc_reset": 1, "percent": 1, "reset": [1, 2, 8], "specifi": [1, 4, 5], "calcul": 1, "averag": 1, "open": [1, 8], "circuit": [1, 8], "voltag": [1, 8, 9], "100": [1, 5], "1": [1, 5, 9], "ocv": [1, 8], "bool": [1, 3], "bms_chg_error": 1, "uint32_t": 1, "error_flag": 1, "error": [1, 8], "flag": 1, "check": [1, 3], "return": [1, 3], "true": [1, 3], "ani": 1, "bms_dis_error": 1, "bms_chg_allow": 1, "allow": [1, 5, 9], "ar": [1, 5, 9], "bms_dis_allow": 1, "includ": [1, 5], "h": 1, "context": 1, "inform": 1, "public": [1, 5], "member": 1, "chg_enabl": 1, "manual": [1, 5], "dis_en": 1, "cv": 1, "cell_chg_voltage_limit": 1, "finish": 1, "empti": 1, "below": [1, 5, 7, 9], "cell_dis_voltage_limit": 1, "nominal_capacity_ah": 1, "ah": 1, "an": [1, 5], "arrai": [1, 3], "contain": [1, 4, 5, 7], "must": [1, 3], "space": 1, "same": [1, 4, 7], "soc_point": 1, "point": [1, 4], "const": [1, 3], "devic": [1, 2], "ic_dev": 1, "ic": 1, "ic_conf": 1, "configur": [1, 3, 7, 8, 9], "appli": [1, 2], "dure": 1, "up": [1, 3, 7, 8], "bms_ic_data": 1, "ic_data": 1, "data": [1, 5], "read": [1, 2], "from": [1, 5, 8], "handl": [2, 3, 4], "thingset": [2, 5, 8], "node": 2, "app_id_devic": 2, "app_id_device_manufactur": 2, "app_id_device_typ": 2, "app_id_device_hw_v": 2, "app_id_device_fw_v": 2, "app_id_device_shutdown": 2, "app_id_device_reset": 2, "app_id_device_print_reg": 2, "app_id_device_print_reg_addr": 2, "app_id_conf": 2, "app_id_conf_nominal_capac": 2, "app_id_conf_short_circuit_curr": 2, "app_id_conf_short_circuit_delai": 2, "app_id_conf_dis_overcurr": 2, "app_id_conf_dis_overcurrent_delai": 2, "app_id_conf_chg_overcurr": 2, "app_id_conf_chg_overcurrent_delai": 2, "app_id_conf_dis_max_temp": 2, "app_id_conf_dis_min_temp": 2, "app_id_conf_chg_max_temp": 2, "app_id_conf_chg_min_temp": 2, "app_id_conf_temp_hyst": 2, "app_id_conf_cell_overvoltag": 2, "app_id_conf_cell_overvoltage_reset": 2, "app_id_conf_cell_overvoltage_delai": 2, "app_id_conf_cell_undervoltag": 2, "app_id_conf_cell_undervoltage_reset": 2, "app_id_conf_cell_undervoltage_delai": 2, "app_id_conf_bal_target_diff": 2, "app_id_conf_bal_min_voltag": 2, "app_id_conf_bal_idle_delai": 2, "app_id_conf_bal_idle_curr": 2, "app_id_conf_preset_nmc": 2, "app_id_conf_preset_nmc_capac": 2, "app_id_conf_preset_lfp": 2, "app_id_conf_preset_lfp_capac": 2, "app_id_conf_ocv_point": 2, "app_id_conf_soc_point": 2, "app_id_mea": 2, "app_id_meas_pack_voltag": 2, "app_id_meas_stack_voltag": 2, "app_id_meas_pack_curr": 2, "app_id_meas_cell_temp": 2, "app_id_meas_ic_temp": 2, "app_id_meas_mcu_temp": 2, "app_id_meas_mosfet_temp": 2, "app_id_meas_soc": 2, "app_id_meas_error_flag": 2, "app_id_meas_bms_st": 2, "app_id_meas_cell_voltag": 2, "app_id_meas_cell_avg_voltag": 2, "app_id_meas_cell_min_voltag": 2, "app_id_meas_cell_max_voltag": 2, "app_id_meas_balancing_statu": 2, "app_id_input": 2, "app_id_input_chg_en": 2, "app_id_input_dis_en": 2, "data_objects_update_conf": 2, "thingset_callback_reason": 2, "reason": 2, "callback": 2, "when": [2, 5], "conf": [2, 5], "were": 2, "chang": 2, "int32_t": 2, "bat_preset_nmc": 2, "preset": 2, "bat_preset_lfp": 2, "lfp": 2, "print_regist": 2, "print": 2, "bm": [2, 5, 7, 8], "regist": 2, "reset_devic": 2, "obvious": 2, "invok": 2, "bms_shutdown": 2, "switch": [3, 4, 7], "button_init": 3, "interrupt": 3, "button_pressed_for_3": 3, "press": [3, 4], "second": [3, 5], "least": 3, "gener": 3, "interpol": 3, "b": [3, 4, 5], "size_t": 3, "size": 3, "value_a": 3, "look": [3, 7, 8], "tabl": [3, 4, 8], "monoton": 3, "increas": 3, "decreas": 3, "posit": 3, "char": 3, "byte2bitstr": 3, "uint8_t": 3, "convert": 3, "byte": 3, "bit": 3, "string": 3, "attent": 3, "us": [3, 4, 5, 6, 7, 8, 9], "static": 3, "buffer": 3, "thread": 3, "safe": 3, "8": [3, 9], "charact": 3, "null": 3, "is_empti": 3, "buf": 3, "entir": 3, "zero": 3, "A": [3, 8], "fals": 3, "As": 4, "branch": 4, "mai": [4, 7], "unstabl": 4, "code": 4, "make": 4, "sure": 4, "select": 4, "desir": 4, "releas": 4, "see": [4, 5], "list": [4, 5, 9], "git": [4, 7], "your": [4, 7], "west": [4, 5, 7], "app": [4, 5, 7], "subfold": [4, 5], "all": [4, 5, 7, 8], "applic": [4, 7], "sourc": [4, 7], "file": [4, 5, 7], "cmake": 4, "entri": 4, "firmwar": [4, 7, 9], "we": 4, "go": [4, 7], "directori": [4, 7], "first": 4, "cd": [4, 7], "correct": 4, "name": 4, "revis": [4, 9], "append": 4, "accord": [4, 7], "support": 4, "hardwar": [4, 8], "It": [4, 5], "omit": 4, "onli": [4, 5], "singl": [4, 9], "also": [4, 5, 7, 9], "here": 4, "more": 4, "detail": 4, "regard": 4, "specif": [4, 7], "debug": 4, "probe": 4, "runner": 4, "e": [4, 5, 7], "g": [4, 5, 7], "j": 4, "link": 4, "r": 4, "jlink": 4, "requir": [4, 7], "addit": [4, 5], "step": [4, 6], "get": 4, "binari": 4, "blob": 4, "fetch": 4, "hal_espressif": 4, "afterward": [4, 7], "you": [4, 7], "wai": 4, "For": [4, 5], "monitor": [4, 8, 9], "serial": [4, 8], "built": 4, "espressif": 4, "toolchain": 4, "ctrl": 4, "t": [4, 5, 6], "follow": [4, 5, 6, 8], "x": 4, "exit": 4, "easi": 5, "board": [5, 7, 8], "In": 5, "devicetre": 5, "arm": 5, "board_nam": 5, "dt": 5, "mcu": [5, 9], "which": [5, 9], "repositori": [5, 7], "order": 5, "overwrit": 5, "overlai": 5, "command": [5, 6, 7], "line": 5, "If": [5, 7], "store": 5, "recogn": 5, "automat": [5, 8], "build": [5, 6], "featur": [5, 9], "menuconfig": 5, "prj": 5, "option": [5, 8], "similar": 5, "per": 5, "creat": [5, 7], "folder": [5, 7], "merg": 5, "By": 5, "config_cell_type_lfp": 5, "other": [5, 7], "pre": 5, "config_bat_type_nmc": 5, "config_bat_type_nmc_hv": 5, "config_bat_type_lto": 5, "ha": [5, 8], "config_bms_ic_isl94202_num_cel": 5, "isl94202": [5, 9], "chip": [5, 9], "detect": 5, "To": 5, "compil": 5, "24v": 5, "100ah": 5, "add": 5, "config_bat_capacity_ah": 5, "y": 5, "expos": 5, "its": 5, "protocol": [5, 8], "live": 5, "publish": 5, "interv": 5, "snippet": 5, "chosen": 5, "usart2": 5, "regular": 5, "startup": 5, "config_thingset_reporting_live_enable_preset": 5, "n": [5, 6], "period": 5, "config_thingset_reporting_live_period_preset": 5, "10": [5, 9], "There": 5, "some": 5, "like": [5, 7], "ol": 5, "displai": 5, "connect": 5, "exampl": 5, "bms_8s50_ic": 5, "dextra_conf_fil": 5, "dshield": 5, "uext_ol": 5, "write": 6, "still": 6, "work": 6, "progress": 6, "implement": 6, "driven": 6, "fashion": 6, "old": 6, "ad": 6, "": [6, 8], "ztest": 6, "framework": 6, "twister": 6, "tool": [6, 7], "run": 6, "script": 6, "integr": 6, "inlin": 6, "log": 6, "guid": 7, "assum": 7, "have": 7, "alreadi": 7, "instal": 7, "sdk": 7, "document": 7, "pull": 7, "init": 7, "m": [7, 8], "com": 7, "libresolar": 7, "upstream": 7, "modul": 7, "take": 7, "while": 7, "import": 7, "config": 7, "test": 7, "unit": 7, "yml": 7, "manifest": 7, "libr": [7, 9], "solar": [7, 9], "re": 7, "avoid": 7, "mani": 7, "copi": 7, "clone": 7, "done": 7, "between": 7, "path": 7, "amongst": 8, "inherit": 8, "underli": 8, "map": 8, "mqtt": 8, "coap": 8, "interfac": 8, "bu": 8, "bluetooth": 8, "extens": 8, "uext": 8, "connector": 8, "depend": 8, "i2c": 8, "spi": 8, "uart": 8, "estim": 8, "coulomb": 8, "count": 8, "layout": 8, "chemistri": 8, "nca": 8, "number": 8, "thermistor": 8, "shunt": 8, "resistor": 8, "protect": [8, 9], "short": 8, "limit": 8, "delai": 8, "u": 8, "over": 8, "target": 8, "threshold": 8, "temperatur": 8, "dot": 8, "c": 8, "dut": 8, "cot": 8, "cut": 8, "hysteresi": 8, "balanc": [8, 9], "minimum": 8, "consid": 8, "idl": 8, "durat": 8, "befor": 8, "softwar": 9, "easili": 9, "stm32": 9, "esp32": 9, "5s50": 9, "sc": 9, "stm32f072": 9, "bq76920": 9, "15s80": 9, "bq76930": 9, "40": 9, "16s100": 9, "stm32g0b1": 9, "bq76952": 9, "c1": 9, "c3": 9, "8s50": 9, "stm32l452": 9, "usual": 9, "provid": 9, "manufactur": 9, "datasheet": 9, "statu": 9, "texa": 9, "instrument": 9, "5": 9, "6": 9, "bq76940": 9, "9": 9, "15": 9, "16": 9, "renesa": 9, "intersil": 9}, "objects": {"": [[2, 0, 1, "c.APP_ID_CONF", "APP_ID_CONF"], [2, 0, 1, "c.APP_ID_CONF_BAL_IDLE_CURRENT", "APP_ID_CONF_BAL_IDLE_CURRENT"], [2, 0, 1, "c.APP_ID_CONF_BAL_IDLE_DELAY", "APP_ID_CONF_BAL_IDLE_DELAY"], [2, 0, 1, "c.APP_ID_CONF_BAL_MIN_VOLTAGE", "APP_ID_CONF_BAL_MIN_VOLTAGE"], [2, 0, 1, "c.APP_ID_CONF_BAL_TARGET_DIFF", "APP_ID_CONF_BAL_TARGET_DIFF"], [2, 0, 1, "c.APP_ID_CONF_CELL_OVERVOLTAGE", "APP_ID_CONF_CELL_OVERVOLTAGE"], [2, 0, 1, "c.APP_ID_CONF_CELL_OVERVOLTAGE_DELAY", "APP_ID_CONF_CELL_OVERVOLTAGE_DELAY"], [2, 0, 1, "c.APP_ID_CONF_CELL_OVERVOLTAGE_RESET", "APP_ID_CONF_CELL_OVERVOLTAGE_RESET"], [2, 0, 1, "c.APP_ID_CONF_CELL_UNDERVOLTAGE", "APP_ID_CONF_CELL_UNDERVOLTAGE"], [2, 0, 1, "c.APP_ID_CONF_CELL_UNDERVOLTAGE_DELAY", "APP_ID_CONF_CELL_UNDERVOLTAGE_DELAY"], [2, 0, 1, "c.APP_ID_CONF_CELL_UNDERVOLTAGE_RESET", "APP_ID_CONF_CELL_UNDERVOLTAGE_RESET"], [2, 0, 1, "c.APP_ID_CONF_CHG_MAX_TEMP", "APP_ID_CONF_CHG_MAX_TEMP"], [2, 0, 1, "c.APP_ID_CONF_CHG_MIN_TEMP", "APP_ID_CONF_CHG_MIN_TEMP"], [2, 0, 1, "c.APP_ID_CONF_CHG_OVERCURRENT", "APP_ID_CONF_CHG_OVERCURRENT"], [2, 0, 1, "c.APP_ID_CONF_CHG_OVERCURRENT_DELAY", "APP_ID_CONF_CHG_OVERCURRENT_DELAY"], [2, 0, 1, "c.APP_ID_CONF_DIS_MAX_TEMP", "APP_ID_CONF_DIS_MAX_TEMP"], [2, 0, 1, "c.APP_ID_CONF_DIS_MIN_TEMP", "APP_ID_CONF_DIS_MIN_TEMP"], [2, 0, 1, "c.APP_ID_CONF_DIS_OVERCURRENT", "APP_ID_CONF_DIS_OVERCURRENT"], [2, 0, 1, "c.APP_ID_CONF_DIS_OVERCURRENT_DELAY", "APP_ID_CONF_DIS_OVERCURRENT_DELAY"], [2, 0, 1, "c.APP_ID_CONF_NOMINAL_CAPACITY", "APP_ID_CONF_NOMINAL_CAPACITY"], [2, 0, 1, "c.APP_ID_CONF_OCV_POINTS", "APP_ID_CONF_OCV_POINTS"], [2, 0, 1, "c.APP_ID_CONF_PRESET_LFP", "APP_ID_CONF_PRESET_LFP"], [2, 0, 1, "c.APP_ID_CONF_PRESET_LFP_CAPACITY", "APP_ID_CONF_PRESET_LFP_CAPACITY"], [2, 0, 1, "c.APP_ID_CONF_PRESET_NMC", "APP_ID_CONF_PRESET_NMC"], [2, 0, 1, "c.APP_ID_CONF_PRESET_NMC_CAPACITY", "APP_ID_CONF_PRESET_NMC_CAPACITY"], [2, 0, 1, "c.APP_ID_CONF_SHORT_CIRCUIT_CURRENT", "APP_ID_CONF_SHORT_CIRCUIT_CURRENT"], [2, 0, 1, "c.APP_ID_CONF_SHORT_CIRCUIT_DELAY", "APP_ID_CONF_SHORT_CIRCUIT_DELAY"], [2, 0, 1, "c.APP_ID_CONF_SOC_POINTS", "APP_ID_CONF_SOC_POINTS"], [2, 0, 1, "c.APP_ID_CONF_TEMP_HYST", "APP_ID_CONF_TEMP_HYST"], [2, 0, 1, "c.APP_ID_DEVICE", "APP_ID_DEVICE"], [2, 0, 1, "c.APP_ID_DEVICE_FW_VER", "APP_ID_DEVICE_FW_VER"], [2, 0, 1, "c.APP_ID_DEVICE_HW_VER", "APP_ID_DEVICE_HW_VER"], [2, 0, 1, "c.APP_ID_DEVICE_MANUFACTURER", "APP_ID_DEVICE_MANUFACTURER"], [2, 0, 1, "c.APP_ID_DEVICE_PRINT_REG", "APP_ID_DEVICE_PRINT_REG"], [2, 0, 1, "c.APP_ID_DEVICE_PRINT_REGS", "APP_ID_DEVICE_PRINT_REGS"], [2, 0, 1, "c.APP_ID_DEVICE_PRINT_REG_ADDR", "APP_ID_DEVICE_PRINT_REG_ADDR"], [2, 0, 1, "c.APP_ID_DEVICE_RESET", "APP_ID_DEVICE_RESET"], [2, 0, 1, "c.APP_ID_DEVICE_SHUTDOWN", "APP_ID_DEVICE_SHUTDOWN"], [2, 0, 1, "c.APP_ID_DEVICE_TYPE", "APP_ID_DEVICE_TYPE"], [2, 0, 1, "c.APP_ID_INPUT", "APP_ID_INPUT"], [2, 0, 1, "c.APP_ID_INPUT_CHG_ENABLE", "APP_ID_INPUT_CHG_ENABLE"], [2, 0, 1, "c.APP_ID_INPUT_DIS_ENABLE", "APP_ID_INPUT_DIS_ENABLE"], [2, 0, 1, "c.APP_ID_MEAS", "APP_ID_MEAS"], [2, 0, 1, "c.APP_ID_MEAS_BALANCING_STATUS", "APP_ID_MEAS_BALANCING_STATUS"], [2, 0, 1, "c.APP_ID_MEAS_BMS_STATE", "APP_ID_MEAS_BMS_STATE"], [2, 0, 1, "c.APP_ID_MEAS_CELL_AVG_VOLTAGE", "APP_ID_MEAS_CELL_AVG_VOLTAGE"], [2, 0, 1, "c.APP_ID_MEAS_CELL_MAX_VOLTAGE", "APP_ID_MEAS_CELL_MAX_VOLTAGE"], [2, 0, 1, "c.APP_ID_MEAS_CELL_MIN_VOLTAGE", "APP_ID_MEAS_CELL_MIN_VOLTAGE"], [2, 0, 1, "c.APP_ID_MEAS_CELL_TEMPS", "APP_ID_MEAS_CELL_TEMPS"], [2, 0, 1, "c.APP_ID_MEAS_CELL_VOLTAGES", "APP_ID_MEAS_CELL_VOLTAGES"], [2, 0, 1, "c.APP_ID_MEAS_ERROR_FLAGS", "APP_ID_MEAS_ERROR_FLAGS"], [2, 0, 1, "c.APP_ID_MEAS_IC_TEMP", "APP_ID_MEAS_IC_TEMP"], [2, 0, 1, "c.APP_ID_MEAS_MCU_TEMP", "APP_ID_MEAS_MCU_TEMP"], [2, 0, 1, "c.APP_ID_MEAS_MOSFET_TEMP", "APP_ID_MEAS_MOSFET_TEMP"], [2, 0, 1, "c.APP_ID_MEAS_PACK_CURRENT", "APP_ID_MEAS_PACK_CURRENT"], [2, 0, 1, "c.APP_ID_MEAS_PACK_VOLTAGE", "APP_ID_MEAS_PACK_VOLTAGE"], [2, 0, 1, "c.APP_ID_MEAS_SOC", "APP_ID_MEAS_SOC"], [2, 0, 1, "c.APP_ID_MEAS_STACK_VOLTAGE", "APP_ID_MEAS_STACK_VOLTAGE"], [1, 1, 1, "c.bms_state.BMS_STATE_CHG", "BMS_STATE_CHG"], [1, 1, 1, "c.bms_state.BMS_STATE_DIS", "BMS_STATE_DIS"], [1, 1, 1, "c.bms_state.BMS_STATE_NORMAL", "BMS_STATE_NORMAL"], [1, 1, 1, "c.bms_state.BMS_STATE_OFF", "BMS_STATE_OFF"], [1, 1, 1, "c.bms_state.BMS_STATE_SHUTDOWN", "BMS_STATE_SHUTDOWN"], [1, 1, 1, "c.bms_cell_type.CELL_TYPE_CUSTOM", "CELL_TYPE_CUSTOM"], [1, 1, 1, "c.bms_cell_type.CELL_TYPE_LFP", "CELL_TYPE_LFP"], [1, 1, 1, "c.bms_cell_type.CELL_TYPE_LTO", "CELL_TYPE_LTO"], [1, 1, 1, "c.bms_cell_type.CELL_TYPE_NMC", "CELL_TYPE_NMC"], [1, 0, 1, "c.OCV_POINTS", "OCV_POINTS"], [2, 2, 1, "c.bat_preset_lfp", "bat_preset_lfp"], [2, 2, 1, "c.bat_preset_nmc", "bat_preset_nmc"], [1, 3, 1, "c.bms_cell_type", "bms_cell_type"], [1, 2, 1, "c.bms_chg_allowed", "bms_chg_allowed"], [1, 2, 1, "c.bms_chg_error", "bms_chg_error"], [1, 5, 1, "c.bms_context", "bms_context"], [1, 2, 1, "c.bms_dis_allowed", "bms_dis_allowed"], [1, 2, 1, "c.bms_dis_error", "bms_dis_error"], [1, 2, 1, "c.bms_init_config", "bms_init_config"], [1, 2, 1, "c.bms_soc_reset", "bms_soc_reset"], [1, 2, 1, "c.bms_soc_update", "bms_soc_update"], [1, 3, 1, "c.bms_state", "bms_state"], [1, 2, 1, "c.bms_state_machine", "bms_state_machine"], [3, 2, 1, "c.button_init", "button_init"], [3, 2, 1, "c.button_pressed_for_3s", "button_pressed_for_3s"], [3, 2, 1, "c.byte2bitstr", "byte2bitstr"], [2, 2, 1, "c.data_objects_update_conf", "data_objects_update_conf"], [3, 2, 1, "c.interpolate", "interpolate"], [3, 2, 1, "c.is_empty", "is_empty"], [2, 2, 1, "c.print_registers", "print_registers"], [2, 2, 1, "c.reset_device", "reset_device"], [2, 2, 1, "c.shutdown", "shutdown"]], "bms_cell_type": [[1, 1, 1, "c.bms_cell_type.CELL_TYPE_CUSTOM", "CELL_TYPE_CUSTOM"], [1, 1, 1, "c.bms_cell_type.CELL_TYPE_LFP", "CELL_TYPE_LFP"], [1, 1, 1, "c.bms_cell_type.CELL_TYPE_LTO", "CELL_TYPE_LTO"], [1, 1, 1, "c.bms_cell_type.CELL_TYPE_NMC", "CELL_TYPE_NMC"]], "bms_chg_allowed": [[1, 4, 1, "c.bms_chg_allowed", "bms"]], "bms_chg_error": [[1, 4, 1, "c.bms_chg_error", "error_flags"]], "bms_context": [[1, 6, 1, "c.bms_context.chg_enable", "chg_enable"], [1, 6, 1, "c.bms_context.dis_enable", "dis_enable"], [1, 6, 1, "c.bms_context.empty", "empty"], [1, 6, 1, "c.bms_context.full", "full"], [1, 6, 1, "c.bms_context.ic_conf", "ic_conf"], [1, 6, 1, "c.bms_context.ic_data", "ic_data"], [1, 6, 1, "c.bms_context.ic_dev", "ic_dev"], [1, 6, 1, "c.bms_context.nominal_capacity_Ah", "nominal_capacity_Ah"], [1, 6, 1, "c.bms_context.ocv_points", "ocv_points"], [1, 6, 1, "c.bms_context.soc", "soc"], [1, 6, 1, "c.bms_context.soc_points", "soc_points"], [1, 6, 1, "c.bms_context.state", "state"]], "bms_dis_allowed": [[1, 4, 1, "c.bms_dis_allowed", "bms"]], "bms_dis_error": [[1, 4, 1, "c.bms_dis_error", "error_flags"]], "bms_init_config": [[1, 4, 1, "c.bms_init_config", "bms"], [1, 4, 1, "c.bms_init_config", "capacity_Ah"], [1, 4, 1, "c.bms_init_config", "type"]], "bms_soc_reset": [[1, 4, 1, "c.bms_soc_reset", "bms"], [1, 4, 1, "c.bms_soc_reset", "percent"]], "bms_soc_update": [[1, 4, 1, "c.bms_soc_update", "bms"]], "bms_state": [[1, 1, 1, "c.bms_state.BMS_STATE_CHG", "BMS_STATE_CHG"], [1, 1, 1, "c.bms_state.BMS_STATE_DIS", "BMS_STATE_DIS"], [1, 1, 1, "c.bms_state.BMS_STATE_NORMAL", "BMS_STATE_NORMAL"], [1, 1, 1, "c.bms_state.BMS_STATE_OFF", "BMS_STATE_OFF"], [1, 1, 1, "c.bms_state.BMS_STATE_SHUTDOWN", "BMS_STATE_SHUTDOWN"]], "bms_state_machine": [[1, 4, 1, "c.bms_state_machine", "bms"]], "byte2bitstr": [[3, 4, 1, "c.byte2bitstr", "b"]], "data_objects_update_conf": [[2, 4, 1, "c.data_objects_update_conf", "reason"]], "interpolate": [[3, 4, 1, "c.interpolate", "a"], [3, 4, 1, "c.interpolate", "b"], [3, 4, 1, "c.interpolate", "size"], [3, 4, 1, "c.interpolate", "value_a"]], "is_empty": [[3, 4, 1, "c.is_empty", "buf"], [3, 4, 1, "c.is_empty", "size"]]}, "objtypes": {"0": "c:macro", "1": "c:enumerator", "2": "c:function", "3": "c:enum", "4": "c:functionParam", "5": "c:struct", "6": "c:member"}, "objnames": {"0": ["c", "macro", "C macro"], "1": ["c", "enumerator", "C enumerator"], "2": ["c", "function", "C function"], "3": ["c", "enum", "C enum"], "4": ["c", "functionParam", "C function parameter"], "5": ["c", "struct", "C struct"], "6": ["c", "member", "C member"]}, "titleterms": {"libr": 0, "solar": 0, "bm": [0, 1, 9], "firmwar": [0, 5], "document": 0, "data": 2, "object": 2, "misc": 3, "button": 3, "helper": 3, "build": 4, "flash": 4, "board": [4, 9], "stm32": 4, "mcu": 4, "esp32": 4, "custom": 5, "hardwar": [5, 9], "specif": 5, "chang": 5, "applic": 5, "configur": 5, "batteri": 5, "capac": 5, "cell": 5, "type": 5, "number": 5, "seri": 5, "serial": 5, "interfac": 5, "shield": 5, "uext": 5, "connector": 5, "unit": 6, "test": 6, "workspac": 7, "setup": 7, "featur": 8, "support": 9, "ic": 9}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 57}, "alltitles": {"Workspace Setup": [[7, "workspace-setup"]], "Unit Tests": [[6, "unit-tests"]], "Customization": [[5, "customization"]], "Hardware-specific changes": [[5, "hardware-specific-changes"]], "Application firmware configuration": [[5, "application-firmware-configuration"]], "Change battery capacity, cell type and number of cells in series": [[5, "change-battery-capacity-cell-type-and-number-of-cells-in-series"]], "Configure serial interface": [[5, "configure-serial-interface"]], "Shields for UEXT connector": [[5, "shields-for-uext-connector"]], "Building and Flashing": [[4, "building-and-flashing"]], "Boards with STM32 MCU": [[4, "boards-with-stm32-mcu"]], "Boards with ESP32 MCU": [[4, "boards-with-esp32-mcu"]], "Supported Hardware": [[9, "supported-hardware"]], "Boards": [[9, "boards"]], "BMS ICs": [[9, "bms-ics"]], "Features": [[8, "features"]], "BMS": [[1, "bms"]], "Libre Solar BMS Firmware Documentation": [[0, "libre-solar-bms-firmware-documentation"]], "Misc": [[3, "misc"]], "Button": [[3, "button"]], "Helper": [[3, "helper"]], "Data Objects": [[2, "data-objects"]]}, "indexentries": {"ocv_points (c macro)": [[1, "c.OCV_POINTS"]], "bms_cell_type (c enum)": [[1, "c.bms_cell_type"]], "bms_cell_type.cell_type_custom (c enumerator)": [[1, "c.bms_cell_type.CELL_TYPE_CUSTOM"]], "bms_cell_type.cell_type_lfp (c enumerator)": [[1, "c.bms_cell_type.CELL_TYPE_LFP"]], "bms_cell_type.cell_type_lto (c enumerator)": [[1, "c.bms_cell_type.CELL_TYPE_LTO"]], "bms_cell_type.cell_type_nmc (c enumerator)": [[1, "c.bms_cell_type.CELL_TYPE_NMC"]], "bms_chg_allowed (c function)": [[1, "c.bms_chg_allowed"]], "bms_chg_error (c function)": [[1, "c.bms_chg_error"]], "bms_context (c struct)": [[1, "c.bms_context"]], "bms_context.chg_enable (c var)": [[1, "c.bms_context.chg_enable"]], "bms_context.dis_enable (c var)": [[1, "c.bms_context.dis_enable"]], "bms_context.empty (c var)": [[1, "c.bms_context.empty"]], "bms_context.full (c var)": [[1, "c.bms_context.full"]], "bms_context.ic_conf (c var)": [[1, "c.bms_context.ic_conf"]], "bms_context.ic_data (c var)": [[1, "c.bms_context.ic_data"]], "bms_context.ic_dev (c var)": [[1, "c.bms_context.ic_dev"]], "bms_context.nominal_capacity_ah (c var)": [[1, "c.bms_context.nominal_capacity_Ah"]], "bms_context.ocv_points (c var)": [[1, "c.bms_context.ocv_points"]], "bms_context.soc (c var)": [[1, "c.bms_context.soc"]], "bms_context.soc_points (c var)": [[1, "c.bms_context.soc_points"]], "bms_context.state (c var)": [[1, "c.bms_context.state"]], "bms_dis_allowed (c function)": [[1, "c.bms_dis_allowed"]], "bms_dis_error (c function)": [[1, "c.bms_dis_error"]], "bms_init_config (c function)": [[1, "c.bms_init_config"]], "bms_soc_reset (c function)": [[1, "c.bms_soc_reset"]], "bms_soc_update (c function)": [[1, "c.bms_soc_update"]], "bms_state (c enum)": [[1, "c.bms_state"]], "bms_state.bms_state_chg (c enumerator)": [[1, "c.bms_state.BMS_STATE_CHG"]], "bms_state.bms_state_dis (c enumerator)": [[1, "c.bms_state.BMS_STATE_DIS"]], "bms_state.bms_state_normal (c enumerator)": [[1, "c.bms_state.BMS_STATE_NORMAL"]], "bms_state.bms_state_off (c enumerator)": [[1, "c.bms_state.BMS_STATE_OFF"]], "bms_state.bms_state_shutdown (c enumerator)": [[1, "c.bms_state.BMS_STATE_SHUTDOWN"]], "bms_state_machine (c function)": [[1, "c.bms_state_machine"]], "app_id_conf (c macro)": [[2, "c.APP_ID_CONF"]], "app_id_conf_bal_idle_current (c macro)": [[2, "c.APP_ID_CONF_BAL_IDLE_CURRENT"]], "app_id_conf_bal_idle_delay (c macro)": [[2, "c.APP_ID_CONF_BAL_IDLE_DELAY"]], "app_id_conf_bal_min_voltage (c macro)": [[2, "c.APP_ID_CONF_BAL_MIN_VOLTAGE"]], "app_id_conf_bal_target_diff (c macro)": [[2, "c.APP_ID_CONF_BAL_TARGET_DIFF"]], "app_id_conf_cell_overvoltage (c macro)": [[2, "c.APP_ID_CONF_CELL_OVERVOLTAGE"]], "app_id_conf_cell_overvoltage_delay (c macro)": [[2, "c.APP_ID_CONF_CELL_OVERVOLTAGE_DELAY"]], "app_id_conf_cell_overvoltage_reset (c macro)": [[2, "c.APP_ID_CONF_CELL_OVERVOLTAGE_RESET"]], "app_id_conf_cell_undervoltage (c macro)": [[2, "c.APP_ID_CONF_CELL_UNDERVOLTAGE"]], "app_id_conf_cell_undervoltage_delay (c macro)": [[2, "c.APP_ID_CONF_CELL_UNDERVOLTAGE_DELAY"]], "app_id_conf_cell_undervoltage_reset (c macro)": [[2, "c.APP_ID_CONF_CELL_UNDERVOLTAGE_RESET"]], "app_id_conf_chg_max_temp (c macro)": [[2, "c.APP_ID_CONF_CHG_MAX_TEMP"]], "app_id_conf_chg_min_temp (c macro)": [[2, "c.APP_ID_CONF_CHG_MIN_TEMP"]], "app_id_conf_chg_overcurrent (c macro)": [[2, "c.APP_ID_CONF_CHG_OVERCURRENT"]], "app_id_conf_chg_overcurrent_delay (c macro)": [[2, "c.APP_ID_CONF_CHG_OVERCURRENT_DELAY"]], "app_id_conf_dis_max_temp (c macro)": [[2, "c.APP_ID_CONF_DIS_MAX_TEMP"]], "app_id_conf_dis_min_temp (c macro)": [[2, "c.APP_ID_CONF_DIS_MIN_TEMP"]], "app_id_conf_dis_overcurrent (c macro)": [[2, "c.APP_ID_CONF_DIS_OVERCURRENT"]], "app_id_conf_dis_overcurrent_delay (c macro)": [[2, "c.APP_ID_CONF_DIS_OVERCURRENT_DELAY"]], "app_id_conf_nominal_capacity (c macro)": [[2, "c.APP_ID_CONF_NOMINAL_CAPACITY"]], "app_id_conf_ocv_points (c macro)": [[2, "c.APP_ID_CONF_OCV_POINTS"]], "app_id_conf_preset_lfp (c macro)": [[2, "c.APP_ID_CONF_PRESET_LFP"]], "app_id_conf_preset_lfp_capacity (c macro)": [[2, "c.APP_ID_CONF_PRESET_LFP_CAPACITY"]], "app_id_conf_preset_nmc (c macro)": [[2, "c.APP_ID_CONF_PRESET_NMC"]], "app_id_conf_preset_nmc_capacity (c macro)": [[2, "c.APP_ID_CONF_PRESET_NMC_CAPACITY"]], "app_id_conf_short_circuit_current (c macro)": [[2, "c.APP_ID_CONF_SHORT_CIRCUIT_CURRENT"]], "app_id_conf_short_circuit_delay (c macro)": [[2, "c.APP_ID_CONF_SHORT_CIRCUIT_DELAY"]], "app_id_conf_soc_points (c macro)": [[2, "c.APP_ID_CONF_SOC_POINTS"]], "app_id_conf_temp_hyst (c macro)": [[2, "c.APP_ID_CONF_TEMP_HYST"]], "app_id_device (c macro)": [[2, "c.APP_ID_DEVICE"]], "app_id_device_fw_ver (c macro)": [[2, "c.APP_ID_DEVICE_FW_VER"]], "app_id_device_hw_ver (c macro)": [[2, "c.APP_ID_DEVICE_HW_VER"]], "app_id_device_manufacturer (c macro)": [[2, "c.APP_ID_DEVICE_MANUFACTURER"]], "app_id_device_print_reg (c macro)": [[2, "c.APP_ID_DEVICE_PRINT_REG"]], "app_id_device_print_regs (c macro)": [[2, "c.APP_ID_DEVICE_PRINT_REGS"]], "app_id_device_print_reg_addr (c macro)": [[2, "c.APP_ID_DEVICE_PRINT_REG_ADDR"]], "app_id_device_reset (c macro)": [[2, "c.APP_ID_DEVICE_RESET"]], "app_id_device_shutdown (c macro)": [[2, "c.APP_ID_DEVICE_SHUTDOWN"]], "app_id_device_type (c macro)": [[2, "c.APP_ID_DEVICE_TYPE"]], "app_id_input (c macro)": [[2, "c.APP_ID_INPUT"]], "app_id_input_chg_enable (c macro)": [[2, "c.APP_ID_INPUT_CHG_ENABLE"]], "app_id_input_dis_enable (c macro)": [[2, "c.APP_ID_INPUT_DIS_ENABLE"]], "app_id_meas (c macro)": [[2, "c.APP_ID_MEAS"]], "app_id_meas_balancing_status (c macro)": [[2, "c.APP_ID_MEAS_BALANCING_STATUS"]], "app_id_meas_bms_state (c macro)": [[2, "c.APP_ID_MEAS_BMS_STATE"]], "app_id_meas_cell_avg_voltage (c macro)": [[2, "c.APP_ID_MEAS_CELL_AVG_VOLTAGE"]], "app_id_meas_cell_max_voltage (c macro)": [[2, "c.APP_ID_MEAS_CELL_MAX_VOLTAGE"]], "app_id_meas_cell_min_voltage (c macro)": [[2, "c.APP_ID_MEAS_CELL_MIN_VOLTAGE"]], "app_id_meas_cell_temps (c macro)": [[2, "c.APP_ID_MEAS_CELL_TEMPS"]], "app_id_meas_cell_voltages (c macro)": [[2, "c.APP_ID_MEAS_CELL_VOLTAGES"]], "app_id_meas_error_flags (c macro)": [[2, "c.APP_ID_MEAS_ERROR_FLAGS"]], "app_id_meas_ic_temp (c macro)": [[2, "c.APP_ID_MEAS_IC_TEMP"]], "app_id_meas_mcu_temp (c macro)": [[2, "c.APP_ID_MEAS_MCU_TEMP"]], "app_id_meas_mosfet_temp (c macro)": [[2, "c.APP_ID_MEAS_MOSFET_TEMP"]], "app_id_meas_pack_current (c macro)": [[2, "c.APP_ID_MEAS_PACK_CURRENT"]], "app_id_meas_pack_voltage (c macro)": [[2, "c.APP_ID_MEAS_PACK_VOLTAGE"]], "app_id_meas_soc (c macro)": [[2, "c.APP_ID_MEAS_SOC"]], "app_id_meas_stack_voltage (c macro)": [[2, "c.APP_ID_MEAS_STACK_VOLTAGE"]], "bat_preset_lfp (c function)": [[2, "c.bat_preset_lfp"]], "bat_preset_nmc (c function)": [[2, "c.bat_preset_nmc"]], "data_objects_update_conf (c function)": [[2, "c.data_objects_update_conf"]], "print_registers (c function)": [[2, "c.print_registers"]], "reset_device (c function)": [[2, "c.reset_device"]], "shutdown (c function)": [[2, "c.shutdown"]], "button_init (c function)": [[3, "c.button_init"]], "button_pressed_for_3s (c function)": [[3, "c.button_pressed_for_3s"]], "byte2bitstr (c function)": [[3, "c.byte2bitstr"]], "interpolate (c function)": [[3, "c.interpolate"]], "is_empty (c function)": [[3, "c.is_empty"]]}})